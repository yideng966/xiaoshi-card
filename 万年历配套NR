[
    {
        "id": "2034c7b6dac3fdda",
        "type": "group",
        "z": "8debaea502f81074",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "4383db249d30935b",
            "ba25fb7a0d76fdc6",
            "04b64d4aaf049959",
            "955564606288bc47",
            "332684eb89e75cd5",
            "0d8931a769492254",
            "a005d8fd2ae74b52"
        ],
        "x": 34,
        "y": 79,
        "w": 792,
        "h": 142
    },
    {
        "id": "4383db249d30935b",
        "type": "ha-text",
        "z": "8debaea502f81074",
        "g": "2034c7b6dac3fdda",
        "name": "ç‚¹å‡»æ—¥æœŸ",
        "version": 1,
        "debugenabled": false,
        "inputs": 0,
        "outputs": 1,
        "entityConfig": "0127accfa1f097fd",
        "exposeAsEntityConfig": "",
        "mode": "listen",
        "value": "payload",
        "valueType": "msg",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "value"
            },
            {
                "property": "previousValue",
                "propertyType": "msg",
                "value": "",
                "valueType": "previousValue"
            }
        ],
        "x": 120,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "ba25fb7a0d76fdc6",
        "type": "api-current-state",
        "z": "8debaea502f81074",
        "g": "2034c7b6dac3fdda",
        "name": "è·å–æ—¥æœŸ",
        "server": "d5d3e351.02443",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "text.lunar_date",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "date",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 260,
        "y": 120,
        "wires": [
            [
                "332684eb89e75cd5"
            ]
        ]
    },
    {
        "id": "04b64d4aaf049959",
        "type": "function",
        "z": "8debaea502f81074",
        "g": "2034c7b6dac3fdda",
        "name": "æ›´æ–°å®ä½“",
        "func": "/*-----------------------è®¡ç®—ä»Šæ—¥æ—¥æœŸ--é˜³å†------------------------*/\nvar now_solar_time = Lunar.Solar.fromDate(new Date());                            //ä»Šå¤©-é˜³å†æ—¶é—´æˆ³\nvar now_solar_year = \"\" + now_solar_time.getYear();                               //ä»Šå¤©-é˜³å†å¹´\nvar now_solar_month = (\"0\" + now_solar_time.getMonth()).slice(-2);                //ä»Šå¤©-é˜³å†æœˆ\nvar now_solar_day = (\"0\" + now_solar_time.getDay()).slice(-2);                    //ä»Šå¤©-é˜³å†æ—¥\nvar now_solar_week = now_solar_time.getWeekInChinese();\nvar now_solar_date = now_solar_year + \"-\" + now_solar_month + \"-\" + now_solar_day;  //ä»Šå¤©-é˜³å†æ˜ŸæœŸ\nvar Now_solar = {\n    è¯´æ˜: \"ä»Šæ—¥é˜³å†ä¿¡æ¯\",\n    å¹´: now_solar_year,\n    æœˆ: now_solar_month,\n    æ—¥: now_solar_day,\n    æ˜ŸæœŸA: \"æ˜ŸæœŸ\" + now_solar_week,\n    æ˜ŸæœŸB: \"å‘¨\" + now_solar_week,\n    æ—¥æœŸA: now_solar_month + \"æœˆ\" + now_solar_day + \"æ—¥\",\n    æ—¥æœŸB: now_solar_year + \"-\" + now_solar_month + \"-\" + now_solar_day,\n    æ—¥æœŸC: now_solar_year + \"å¹´\" + now_solar_month + \"æœˆ\" + now_solar_day + \"æ—¥\",\n    æ˜Ÿåº§: now_solar_time.getXingZuo() + \"åº§\",\n};\n\n/*-----------------------è®¡ç®—ä»Šæ—¥æ—¥æœŸ--å†œå†-----------------------*/\nvar now_lunar_time = Lunar.Lunar.fromDate(new Date());                                            //ä»Šå¤©-å†œå†æ—¶é—´æˆ³\nvar now_lunar_year = now_lunar_time.getYearInGanZhi() + now_lunar_time.getYearShengXiao() + \"å¹´\"; //ä»Šå¤©-å†œå†å¹´                                  //ä»Šå¤©-å†œå†å¹´\nvar now_lunar_month = now_lunar_time.getMonthInChinese();                                         //ä»Šå¤©-å†œå†æœˆ\nvar now_lunar_day = now_lunar_time.getDayInChinese();\nvar now_lunar_shuju = \"\";\nif (now_lunar_time.getShuJiu()) {\n    now_lunar_shuju = now_lunar_time.getShuJiu().getName() + \" ç¬¬\" + now_lunar_time.getShuJiu().getIndex() + \"å¤©\";\n}\nvar now_lunar_fu = \"\";\nif (now_lunar_time.getFu()) {\n    now_lunar_fu = now_lunar_time.getFu().getName() + \" ç¬¬\" + now_lunar_time.getFu().getIndex() + \"å¤©\";\n}\nvar Now_lunar = {\n    è¯´æ˜: \"ä»Šæ—¥å†œå†ä¿¡æ¯\",\n    å¹´: now_lunar_year,\n    æ—¥æœŸ: now_lunar_month + \"æœˆ\" + now_lunar_day,\n    æ•°ä¹: now_lunar_shuju,\n    ä¸‰ä¼: now_lunar_fu,\n};\n\n/*-----------------------è®¡ç®—ç‚¹å‡»çš„æ—¥æœŸ--é˜³å†--------------------------*/\nvar tap_dateTime = msg.date + \"T00:00:00\";                           //è·å–ç‚¹å‡»åçš„æ—¥æœŸ,æ‹¼æ¥æˆæ—¶é—´æˆ³\nvar tap_solar_time = Lunar.Solar.fromDate(new Date(tap_dateTime));   //è·å–ç‚¹å‡»åçš„å†œå†æ—¥æœŸ\nvar tap_solar_year = \"\" + tap_solar_time.getYear();                               //ä»Šå¤©-é˜³å†å¹´\nvar tap_solar_month = (\"0\" + tap_solar_time.getMonth()).slice(-2);                //ä»Šå¤©-é˜³å†æœˆ\nvar tap_solar_day = (\"0\" + tap_solar_time.getDay()).slice(-2);                    //ä»Šå¤©-é˜³å†æ—¥\nvar tap_solar_week = tap_solar_time.getWeekInChinese();                           //ä»Šå¤©-é˜³å†æ˜ŸæœŸ\nvar Tap_solar = {\n    è¯´æ˜: \"ç‚¹å‡»é˜³å†ä¿¡æ¯\",\n    å¹´: tap_solar_year,\n    æœˆ: tap_solar_month,\n    æ—¥: tap_solar_day,\n    æ˜ŸæœŸA: \"æ˜ŸæœŸ\" + tap_solar_week,\n    æ˜ŸæœŸB: \"å‘¨\" + tap_solar_week,\n    æ—¥æœŸA: tap_solar_month + \"æœˆ\" + tap_solar_day + \"æ—¥\",\n    æ—¥æœŸB: tap_solar_year + \"-\" + tap_solar_month + \"-\" + tap_solar_day,\n    æ—¥æœŸC: tap_solar_year + \"å¹´\" + tap_solar_month + \"æœˆ\" + tap_solar_day + \"æ—¥\",\n    æ˜Ÿåº§: tap_solar_time.getXingZuo() + \"åº§\",\n};\n\n/*-----------------------è®¡ç®—ç‚¹å‡»çš„æ—¥æœŸ--å†œå†--------------------------*/\nvar tap_lunar_time = Lunar.Lunar.fromDate(new Date(tap_dateTime));   //è·å–ç‚¹å‡»åçš„é˜³å†æ—¥æœŸ\nvar tap_lunar_year = tap_lunar_time.getYearInGanZhi() + tap_lunar_time.getYearShengXiao() + \"å¹´\"; //ä»Šå¤©-å†œå†å¹´                                  //ä»Šå¤©-å†œå†å¹´\nvar tap_lunar_month = tap_lunar_time.getMonthInChinese();                                         //ä»Šå¤©-å†œå†æœˆ\nvar tap_lunar_day = tap_lunar_time.getDayInChinese();\nvar tap_lunar_shuju = \"\";\nif (tap_lunar_time.getShuJiu()) {\n    tap_lunar_shuju = tap_lunar_time.getShuJiu().getName() + \" ç¬¬\" + tap_lunar_time.getShuJiu().getIndex() + \"å¤©\";\n}\nvar tap_lunar_fu = \"\";\nif (tap_lunar_time.getFu()) {\n    tap_lunar_fu = tap_lunar_time.getFu().getName() + \" ç¬¬\" + tap_lunar_time.getFu().getIndex() + \"å¤©\";\n}\nvar Tap_lunar = {\n    è¯´æ˜: \"ç‚¹å‡»å†œå†ä¿¡æ¯\",\n    å¹´: tap_lunar_year,\n    æ—¥æœŸ: tap_lunar_month + \"æœˆ\" + tap_lunar_day,\n    æ•°ä¹: tap_lunar_shuju,\n    ä¸‰ä¼: tap_lunar_fu,\n};\n\n/*-------è®¡ç®—ç‚¹å‡»æ—¥æœŸçš„ï¼Œæ—¥å†æ•°ç»„ï¼ˆåŒ…æ‹¬å†œå†æ•°ç»„ã€å†œå†æ–‡æœ¬æ•°ç»„ã€èŠ‚æ—¥æ•°æ—¥ã€èŠ‚æ°”æ•°ç»„ã€å‡æœŸæ•°ç»„ï¼‰--------------*/\nvar tap_year = msg.date.slice(0, 4);                                    //è·å–æ¨¡æ‹Ÿå®ä½“å¾—å¹´\nvar tap_month = msg.date.slice(5, 7);                                //è·å–æ¨¡æ‹Ÿå®ä½“å¾—æœˆ\nvar isrunnian = Lunar.SolarUtil.isLeapYear(tap_year);                  //æ˜¯å¦é—°å¹´ \nvar tap_month_sum_last = 1, tap_month_sum = 1;                               //ä¸Šæœˆå¤©æ•°ï¼Œæœ¬æœˆå¤©æ•°\nif (tap_month == \"01\") tap_month_sum_last = 31, tap_month_sum = 31;\nif (tap_month == \"02\" && isrunnian == 1) tap_month_sum_last = 31, tap_month_sum = 29;\nif (tap_month == \"02\" && isrunnian == 0) tap_month_sum_last = 31, tap_month_sum = 28;\nif (tap_month == \"03\" && isrunnian == 1) tap_month_sum_last = 29, tap_month_sum = 31;\nif (tap_month == \"03\" && isrunnian == 0) tap_month_sum_last = 28, tap_month_sum = 31;\nif (tap_month == \"04\") tap_month_sum_last = 31, tap_month_sum = 30;\nif (tap_month == \"05\") tap_month_sum_last = 30, tap_month_sum = 31;\nif (tap_month == \"06\") tap_month_sum_last = 31, tap_month_sum = 30;\nif (tap_month == \"07\") tap_month_sum_last = 30, tap_month_sum = 31;\nif (tap_month == \"08\") tap_month_sum_last = 31, tap_month_sum = 31;\nif (tap_month == \"09\") tap_month_sum_last = 31, tap_month_sum = 30;\nif (tap_month == \"10\") tap_month_sum_last = 30, tap_month_sum = 31;\nif (tap_month == \"11\") tap_month_sum_last = 31, tap_month_sum = 30;\nif (tap_month == \"12\") tap_month_sum_last = 30, tap_month_sum = 31;\nvar tap_month_01 = tap_year + \"-\" + tap_month + \"-01T00:00:00\";           //ç‚¹å‡»å¹´-ç‚¹å‡»æœˆ-1å·çš„id\nvar tap_month_01_time = Lunar.Lunar.fromDate(new Date(tap_month_01));     //ç‚¹å‡»å¹´-ç‚¹å‡»æœˆ-1å·çš„æ—¥æœŸ\nvar tapweek1id = tap_month_01_time.getWeek();                             //ç‚¹å‡»å¹´-ç‚¹å‡»æœˆ-1å·æ˜¯å‘¨å‡ \nif (tapweek1id == 0) tapweek1id = 7;                                      //ç‚¹å‡»å¹´-ç‚¹å‡»æœˆ-1å·æ˜¯å‘¨å‡ \ntapweek1id = tapweek1id-1;\nvar tap_new_dateTime = \"\";                                                   //åˆå§‹åŒ–å˜é‡\nvar day_label = \"\", month_label = \"\", day = 0, month = 0, year = 0;\n\nvar Lunarday_num = [];   //å†œå†æ•°ç»„\nvar Lunar_label = [];   //å†œå†æ–‡æœ¬\nvar Jieqi_label = [];   //èŠ‚æ°”æ–‡æœ¬\nvar Jiaqi_label = [];   //å‡æœŸæ–‡æœ¬\nvar Jieri_label_lunar = [];  //å†œå†èŠ‚æ—¥æ–‡æœ¬\nvar Jieri_label_solar = [];  //é˜³å†èŠ‚æ—¥æ–‡æœ¬\n\n//å¾ªç¯ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œ6*7=å…±42ä¸ªæ ¼å­çš„æ•°ç»„\nfor (var id = 0; id <= 42; id++) {\n    if (id - tapweek1id >= 0 && id - tapweek1id < tap_month_sum) {\n        year = tap_year,\n            month = tap_month,\n            day = id - tapweek1id + 1,\n            day_label = (\"0\" + day).slice(-2),\n            month_label = (\"0\" + month).slice(-2)\n    }\n    if (id - tapweek1id < 0 && tap_month > 1) {\n        year = tap_year,\n            month = tap_month - 1,\n            day = id - tapweek1id + 1 + tap_month_sum_last,\n            day_label = (\"0\" + day).slice(-2),\n            month_label = (\"0\" + month).slice(-2)\n    }\n    if (id - tapweek1id < 0 && tap_month == 1) {\n        year = tap_year - 1,\n            day = id - tapweek1id + 1 + tap_month_sum_last,\n            day_label = (\"0\" + day).slice(-2),\n            month_label = \"12\"\n    }\n    if (id - tapweek1id >= tap_month_sum && tap_month < 12) {\n        year = tap_year,\n            month = tap_month - (-1),\n            day = id - tapweek1id - tap_month_sum + 1,\n            day_label = (\"0\" + day).slice(-2),\n            month_label = (\"0\" + month).slice(-2)\n    }\n    if (id - tapweek1id >= tap_month_sum && tap_month == 12) {\n        year = tap_year - (-1),\n            day = id - tapweek1id - tap_month_sum + 1,\n            day_label = (\"0\" + day).slice(-2),\n            month_label = \"01\"\n    }\n    tap_new_dateTime = year + \"-\" + month_label + \"-\" + day_label + \"T00:00:00\";\n    var lunarid = Lunar.Lunar.fromDate(new Date(tap_new_dateTime));  //è·å–ç‚¹å‡»æ•°åçš„å‡½æ•°å¤´\n    var solarid = Lunar.Solar.fromDate(new Date(tap_new_dateTime));  //è·å–ç‚¹å‡»æ•°åçš„å‡½æ•°å¤´\n    Lunar_label[id] = lunarid.getMonthInChinese() + \"æœˆ\" + lunarid.getDayInChinese();\n    Jieqi_label[id] = lunarid.getJieQi();\n    Jieri_label_lunar[id] = lunarid.getFestivals()[0];\n    Jieri_label_solar[id] = solarid.getFestivals()[0];\n\n    var yy = lunarid.getYear();\n    var mm = (\"0\" + lunarid.getMonth()).slice(-2);\n    var dd = (\"0\" + lunarid.getDay()).slice(-2);\n    var lunarsum = Lunar.LunarMonth.fromYm(yy, mm)\n    Lunarday_num[id] = mm + dd + lunarsum.getDayCount();\n    \n    var d1 = year + \"-\" + month_label + \"-\" + day_label;\n    var d2 = Lunar.HolidayUtil.getHoliday(d1);\n    if (d2 != null) {\n        Jiaqi_label[id] = d2.isWork();\n    }\n\n}\n\n//è®¡ç®—ä»Šå¤©çš„æ—¶è¾°å‰å‡¶çš„ å¹²æ”¯ã€å‰å‡¶æ•°æ®\nvar ganzi1 = Lunar.Lunar.fromDate(new Date(msg.date + \"T00:30:00\")).getTimeInGanZhi();\nvar ganzi2 = Lunar.Lunar.fromDate(new Date(msg.date + \"T02:00:00\")).getTimeInGanZhi();\nvar ganzi3 = Lunar.Lunar.fromDate(new Date(msg.date + \"T04:00:00\")).getTimeInGanZhi();\nvar ganzi4 = Lunar.Lunar.fromDate(new Date(msg.date + \"T06:00:00\")).getTimeInGanZhi();\nvar ganzi5 = Lunar.Lunar.fromDate(new Date(msg.date + \"T08:00:00\")).getTimeInGanZhi();\nvar ganzi6 = Lunar.Lunar.fromDate(new Date(msg.date + \"T10:00:00\")).getTimeInGanZhi();\nvar ganzi7 = Lunar.Lunar.fromDate(new Date(msg.date + \"T12:00:00\")).getTimeInGanZhi();\nvar ganzi8 = Lunar.Lunar.fromDate(new Date(msg.date + \"T14:00:00\")).getTimeInGanZhi();\nvar ganzi9 = Lunar.Lunar.fromDate(new Date(msg.date + \"T16:00:00\")).getTimeInGanZhi();\nvar ganzi10 = Lunar.Lunar.fromDate(new Date(msg.date + \"T18:00:00\")).getTimeInGanZhi();\nvar ganzi11 = Lunar.Lunar.fromDate(new Date(msg.date + \"T20:00:00\")).getTimeInGanZhi();\nvar ganzi12 = Lunar.Lunar.fromDate(new Date(msg.date + \"T22:00:00\")).getTimeInGanZhi();\nvar ganzi13 = Lunar.Lunar.fromDate(new Date(msg.date + \"T23:30:00\")).getTimeInGanZhi();\nvar luck1 = Lunar.Lunar.fromDate(new Date(msg.date + \"T00:30:00\")).getTimeTianShenLuck();\nvar luck2 = Lunar.Lunar.fromDate(new Date(msg.date + \"T02:00:00\")).getTimeTianShenLuck();\nvar luck3 = Lunar.Lunar.fromDate(new Date(msg.date + \"T04:00:00\")).getTimeTianShenLuck();\nvar luck4 = Lunar.Lunar.fromDate(new Date(msg.date + \"T06:00:00\")).getTimeTianShenLuck();\nvar luck5 = Lunar.Lunar.fromDate(new Date(msg.date + \"T08:00:00\")).getTimeTianShenLuck();\nvar luck6 = Lunar.Lunar.fromDate(new Date(msg.date + \"T10:00:00\")).getTimeTianShenLuck();\nvar luck7 = Lunar.Lunar.fromDate(new Date(msg.date + \"T12:00:00\")).getTimeTianShenLuck();\nvar luck8 = Lunar.Lunar.fromDate(new Date(msg.date + \"T14:00:00\")).getTimeTianShenLuck();\nvar luck9 = Lunar.Lunar.fromDate(new Date(msg.date + \"T16:00:00\")).getTimeTianShenLuck();\nvar luck10 = Lunar.Lunar.fromDate(new Date(msg.date + \"T18:00:00\")).getTimeTianShenLuck();\nvar luck11 = Lunar.Lunar.fromDate(new Date(msg.date + \"T20:00:00\")).getTimeTianShenLuck();\nvar luck12 = Lunar.Lunar.fromDate(new Date(msg.date + \"T22:00:00\")).getTimeTianShenLuck();\nvar luck13 = Lunar.Lunar.fromDate(new Date(msg.date + \"T23:30:00\")).getTimeTianShenLuck();\n\n//è®¡ç®—æœºå™¨ç›¸å…³èŠ‚æ°”\nvar dateLastjieqi = tap_lunar_time.getPrevJieQi().getSolar().toYmd();\ndateLastjieqi = new Date(dateLastjieqi);\nvar lunarLastjieqi = Lunar.Lunar.fromDate(dateLastjieqi);\nvar dateNextjieqi = tap_lunar_time.getNextJieQi().getSolar().toYmd();\ndateNextjieqi = new Date(dateNextjieqi);\nvar lunarNextjieqi = Lunar.Lunar.fromDate(dateNextjieqi);\nvar lastjieqi = tap_lunar_time.getPrevJieQi() + \": \" + tap_lunar_time.getPrevJieQi().getSolar().toYmd() + \" å‘¨\" + lunarLastjieqi.getWeekInChinese();\nvar nextjieqi = tap_lunar_time.getNextJieQi() + \": \" + tap_lunar_time.getNextJieQi().getSolar().toYmd() + \" å‘¨\" + lunarNextjieqi.getWeekInChinese();\nvar last_jieqi = now_lunar_time.getPrevJieQi();\nvar last_jieqi_date = last_jieqi.getSolar().toYmd();\nvar jieqiyy = last_jieqi_date.slice(0, 4);\nvar jieqimm = last_jieqi_date.slice(5, 7);\nvar jieqidd = last_jieqi_date.slice(8, 10);\nvar last = Lunar.Solar.fromYmd(jieqiyy, jieqimm, jieqidd)\nvar now = Lunar.Solar.fromYmd(now_solar_year, now_solar_month, now_solar_day)\nvar num = now.subtract(last);\nvar Jieqi = {\n    èŠ‚æ°”: last_jieqi + \" ç¬¬\" + num + \"å¤©\",\n    ä¸Šä¸€èŠ‚æ°”: lastjieqi,\n    ä¸‹ä¸€èŠ‚æ°”: nextjieqi,\n};\n\n/*è®¡ç®—ç”Ÿæ—¥ç›¸å…³ */\nvar Shengri = msg.Shengri;\n//è®¡ç®—é˜³å†ç”Ÿæ—¥å’Œçºªå¿µæ—¥è·ç¦»å¤©æ•°\nfor (var shengid = 0; shengid < Shengri.length; shengid++) {\n    if (Shengri[shengid].é˜³å† != \"\") {\n        var next_year = Number(now_solar_year) + 1;\n        var runnian1 = Lunar.SolarUtil.isLeapYear(now_solar_year);\n        var runnian2 = Lunar.SolarUtil.isLeapYear(next_year);\n        var year1 = now_solar_year;\n        var year2 = next_year;\n        var month1 = Shengri[shengid].é˜³å†.slice(0, 2);\n        var day1 = Shengri[shengid].é˜³å†.slice(-2);\n        if (runnian1 == 1 && Shengri[shengid].é˜³å† == \"0229\") day1 = \"29\";\n        if (runnian1 == 0 && Shengri[shengid].é˜³å† == \"0229\") day1 = \"28\";\n        var day2 = Shengri[shengid].é˜³å†.slice(-2);\n        if (runnian2 == 1 && Shengri[shengid].é˜³å† == \"0229\") day2 = \"29\";\n        if (runnian2 == 0 && Shengri[shengid].é˜³å† == \"0229\") day2 = \"28\";\n        var shengri_date1 = Lunar.Solar.fromYmd(year1, month1, day1)   //ä»Šå¹´ç”Ÿæ—¥ 2025,05,21\n        var shengri_date2 = Lunar.Solar.fromYmd(year2, month1, day2)   //æ˜å¹´ç”Ÿæ—¥ 2026,05,21\n        var now_date = Lunar.Solar.fromYmd(now_solar_year, now_solar_month, now_solar_day)       //ç°åœ¨æ—¶é—´ 2025-03-18\n        var num1 = shengri_date1.subtract(now_date);\n        var num2 = shengri_date2.subtract(now_date);\n        if (num1 > 0) {\n            Shengri[shengid].é˜³å†å¤©æ•° = num1;\n            Shengri[shengid].é˜³å†å¤©æ•°è¯´æ˜ = Shengri[shengid].åç§° + \" è¿˜æœ‰\" + num1 + \"å¤©\";\n        }\n        if (num1 < 0) {\n            Shengri[shengid].é˜³å†å¤©æ•° = num2;\n            Shengri[shengid].é˜³å†å¤©æ•°è¯´æ˜ = Shengri[shengid].åç§° + \" è¿˜æœ‰\" + num2 + \"å¤©\";\n        }\n        if (num1 == 0) {\n            Shengri[shengid].é˜³å†å¤©æ•° = 0;\n            Shengri[shengid].é˜³å†å¤©æ•°è¯´æ˜ = Shengri[shengid].åç§°;\n        }\n    }\n}\n//è®¡ç®—å†œå†ç”Ÿæ—¥å’Œçºªå¿µæ—¥è·ç¦»å¤©æ•°\nfor (var nongliid = 0; nongliid < Shengri.length; nongliid++) {\n    if (Shengri[nongliid].å†œå† != \"\") {\n        var year1 = now_lunar_time.getYear();\n        var year2 = Number(year1) + 1;\n        var month1 = Shengri[nongliid].å†œå†.slice(0, 2);\n        var lunarMonth1 = Lunar.LunarMonth.fromYm(year1, month1).getDayCount();\n        var lunarMonth2 = Lunar.LunarMonth.fromYm(year2, month1).getDayCount();\n        var day1 = Shengri[nongliid].å†œå†.slice(-2);\n        if (lunarMonth1 == 29 && Shengri[nongliid].å†œå†.slice(-2) == \"30\") { day1 = \"29\"; }\n        var day2 = Shengri[nongliid].å†œå†.slice(-2);\n        if (lunarMonth2 == 29 && Shengri[nongliid].å†œå†.slice(-2) == \"30\") { day2 = \"29\"; }\n        var lunar1 = Lunar.Lunar.fromYmd(year1, month1, day1);\n        var lunar2 = Lunar.Lunar.fromYmd(year2, month1, day2);\n        var solor1 = lunar1.getSolar().toString();\n        var solor2 = lunar2.getSolar().toString();\n        var a1 = solor1.slice(0, 4), a2 = solor1.slice(5, 7), a3 = solor1.slice(8, 10);\n        var b1 = solor2.slice(0, 4), b2 = solor2.slice(5, 7), b3 = solor2.slice(8, 10);\n        var shengri_date1 = Lunar.Solar.fromYmd(a1, a2, a3)   //ä»Šå¹´ç”Ÿæ—¥ 2025,05,21\n        var shengri_date2 = Lunar.Solar.fromYmd(b1, b2, b3)    //æ˜å¹´ç”Ÿæ—¥ 2026,05,21\n        var now_date = Lunar.Solar.fromYmd(now_solar_year, now_solar_month, now_solar_day)       //ç°åœ¨æ—¶é—´ 2025-03-18\n        var num1 = shengri_date1.subtract(now_date);\n        var num2 = shengri_date2.subtract(now_date);\n        if (num1 > 0) {\n            Shengri[nongliid].å†œå†å¤©æ•° = num1;\n            Shengri[nongliid].å†œå†å¤©æ•°è¯´æ˜ = Shengri[nongliid].åç§° + \" è¿˜æœ‰\" + num1 + \"å¤©\";\n        }\n        if (num1 < 0) {\n            Shengri[nongliid].å†œå†å¤©æ•° = num2;\n            Shengri[nongliid].å†œå†å¤©æ•°è¯´æ˜ = Shengri[nongliid].åç§° + \" è¿˜æœ‰\" + num2 + \"å¤©\";\n        }\n        if (num1 == 0) {\n            Shengri[nongliid].å†œå†å¤©æ•° = 0;\n            Shengri[nongliid].å†œå†å¤©æ•°è¯´æ˜ = Shengri[nongliid].åç§°;\n        }\n    }\n}\n\n///è®¡ç®—æœ€è¿‘çš„ç”Ÿæ—¥å’Œçºªå¿µæ—¥\nvar daymins1 = [];\nfor (let i = 0; i < Shengri.length; i++) {\n    if (Number(Shengri[i].é˜³å†å¤©æ•°) >= 0) daymins1[i] = Shengri[i].é˜³å†å¤©æ•°;\n    if (Number(Shengri[i].å†œå†å¤©æ•°) >= 0) daymins1[i + 10] = Shengri[i].å†œå†å¤©æ•°;\n}\nvar daymins2 = daymins1.filter(item => item !== \"\");\nvar min = daymins2[0];\nfor (let j = 0; j < 2 * Shengri.length; j++) {\n    if (daymins2[j] < min) {\n        min = daymins2[j];\n    }\n}\nfor (let k = 0; k < Shengri.length; k++) {\n    if (Shengri[k].é˜³å†å¤©æ•° == min) var shengrilabel = Shengri[k].é˜³å†å¤©æ•°è¯´æ˜;\n    if (Shengri[k].å†œå†å¤©æ•° == min) var shengrilabel = Shengri[k].å†œå†å¤©æ•°è¯´æ˜;\n}\n\n//æ¸…ç†ç”Ÿæ—¥ç©ºç™½æ•°æ®\nvar Shengrinew = Shengri\n    .filter(entry => {\n        const hasValidName = entry.åç§° && entry.åç§°.trim() !== '';\n        const hasSolarInfo = entry.é˜³å†.trim() !== '' || !isNaN(parseInt(entry.é˜³å†å¤©æ•°, 10));\n        const hasLunarInfo = entry.å†œå†.trim() !== '' || !isNaN(parseInt(entry.å†œå†å¤©æ•°, 10));\n        return hasValidName && (hasSolarInfo || hasLunarInfo);\n    });\n\n// å°†ç”Ÿæ—¥æ¥è¿‘å¤©æ•°æ’åºå¹¶ç”Ÿæˆæ•°ç»„\n// å°†ç”Ÿæ—¥æ¥è¿‘å¤©æ•°æ’åºå¹¶ç”Ÿæˆæ•°ç»„\nvar Shengrinum = Shengri\n    .filter(item => item.åç§° && (item.é˜³å†å¤©æ•° >= 0 || item.å†œå†å¤©æ•° >= 0))\n    .map(item => {\n        // ä¼˜å…ˆå–é˜³å†å¤©æ•°ï¼ˆå¦‚æœæœ‰æ•ˆï¼‰ï¼Œå¦åˆ™å–å†œå†å¤©æ•°\n        const days = item.é˜³å†å¤©æ•° !== \"\" ? item.é˜³å†å¤©æ•° : item.å†œå†å¤©æ•°;\n        const message = item.é˜³å†å¤©æ•° !== \"\" ? item.é˜³å†å¤©æ•°è¯´æ˜ : item.å†œå†å¤©æ•°è¯´æ˜;\n        return { days, message };\n    })\n    .sort((a, b) => a.days - b.days)\n    .map(item => item.message);\n\n///è®¡ç®—æœ€è¿‘60å¤©çš„é˜³å†+å†œå†èŠ‚æ—¥\nvar jieriware1 = [], jieriware2 = [], Jieriware = [];\nfor (let ii = 0; ii < 100; ii = ii + 2) {\n    jieriware1[ii] = now_solar_time.next(ii / 2).toString() + now_solar_time.next(ii / 2).getFestivals()[0];\n    jieriware1[ii + 1] = now_lunar_time.next(ii / 2).toString() + now_lunar_time.next(ii / 2).getFestivals()[0];\n}\nvar jieriware3 = jieriware1.filter(item => !item.endsWith(\"undefined\"));\n//å†œå†ä¸­æ–‡è½¬æ¢æ•°å­—å‡½æ•°\nfunction convertDateByRules(str) {\n    // å®šä¹‰è½¬æ¢è§„åˆ™\n    const numbers1 = { 'ã€‡': 0, 'ä¸€': 1, 'äºŒ': 2, 'ä¸‰': 3, 'å››': 4, 'äº”': 5, 'å…­': 6, 'ä¸ƒ': 7, 'å…«': 8, 'ä¹': 9, 'å': 10 };\n    const numbers2 = { 'ã€‡': 0, 'ä¸€': 1, 'äºŒ': 2, 'ä¸‰': 3, 'å››': 4, 'äº”': 5, 'å…­': 6, 'ä¸ƒ': 7, 'å…«': 8, 'ä¹': 9, 'å': 10, 'å†¬': 11, 'è…Š': 12 };\n    const numbers3 = { 'åˆ': 0, 'å': 1, 'å»¿': 2, 'ä¸‰': 3 };\n    const numbers4 = { 'ä¸€': 1, 'äºŒ': 2, 'ä¸‰': 3, 'å››': 4, 'äº”': 5, 'å…­': 6, 'ä¸ƒ': 7, 'å…«': 8, 'ä¹': 9, 'å': 0 };\n    const chars = str.split('');\n    const year = chars.slice(0, 4).map(c => {\n        return numbers1[c];\n    }).join('');\n    const month = numbers2[chars[5]];\n    const dayPrefix = numbers3[chars[7]];\n    const daySuffix = numbers4[chars[8]];\n    const day = dayPrefix * 10 + (dayPrefix === 0 ? daySuffix :\n        dayPrefix === 3 ? 30 : // å¤„ç†ä¸‰å\n            daySuffix === 0 ? 10 : // å¤„ç†å\n                daySuffix);\n    return [\n        year.padStart(4, '0'),\n        month.toString().padStart(2, '0'),\n        day.toString().padStart(2, '0')\n    ].join('');\n}\nfor (let jj = 0; jj < jieriware3.length; jj++) {\n    if (jieriware3[jj].slice(0, 1) == \"äºŒ\") {\n        var date = convertDateByRules(jieriware3[jj].slice(0, 9));\n        var yearjjj = date.slice(0, 4);\n        var monthjjj = date.slice(4, 6);\n        var dayjjj = date.slice(6, 8);\n        var solardate = Lunar.Lunar.fromYmd(yearjjj, monthjjj, dayjjj).getSolar().toString();\n        jieriware3[jj] = solardate + jieriware3[jj].slice(9);\n    }\n}\nfor (let kk = 0; kk < jieriware3.length; kk++) {\n    var yearkk = jieriware3[kk].slice(0, 4);\n    var monthkk = jieriware3[kk].slice(5, 7);\n    var daykk = jieriware3[kk].slice(8, 10);\n    var datekk = Lunar.Solar.fromYmd(yearkk, monthkk, daykk)    //æ˜å¹´ç”Ÿæ—¥ 2026,05,21\n    var now_date = Lunar.Solar.fromYmd(now_solar_year, now_solar_month, now_solar_day)       //ç°åœ¨æ—¶é—´ 2025-03-18\n    var numkk = datekk.subtract(now_date);\n    if (numkk == 0) {\n        Jieriware[kk] = jieriware3[kk].slice(10);\n    }\n    if (numkk > 0) {\n        Jieriware[kk] = jieriware3[kk].slice(10) + \" \" + numkk + \"å¤©\";\n    }\n}\nvar Shengriwarn = {\n    æœ€è¿‘çš„ç”Ÿæ—¥: Shengrinum,\n    æœ€è¿‘çš„èŠ‚æ—¥: Jieriware,\n}\n\n//å®šä¹‰è€é»„å†å†…å®¹\nvar Huangli = {\n    \"å¹²æ”¯\": {\n        å¹´: tap_lunar_time.getYearInGanZhi(),\n        æœˆ: tap_lunar_time.getMonthInGanZhi(),\n        æ—¥: tap_lunar_time.getDayInGanZhi()\n    },\n    \"ç”Ÿè‚–\": {\n        å¹´: tap_lunar_time.getYearShengXiao(),\n        æœˆ: tap_lunar_time.getMonthShengXiao(),\n        æ—¥: tap_lunar_time.getDayShengXiao()\n    },\n    \"çº³éŸ³\": {\n        å¹´: tap_lunar_time.getYearNaYin(),\n        æœˆ: tap_lunar_time.getMonthNaYin(),\n        æ—¥: tap_lunar_time.getDayNaYin()\n    },\n    \"æ—¬ç©º\": {\n        å¹´: tap_lunar_time.getYearXunKong(),\n        æœˆ: tap_lunar_time.getMonthXunKong(),\n        æ—¥: tap_lunar_time.getDayXunKong()\n    },\n    \"å®œ\": tap_lunar_time.getDayYi().join('  '),\n    \"å¿Œ\": tap_lunar_time.getDayJi().join('  '),\n    \"å‰ç¥\": tap_lunar_time.getDayJiShen().join('  '),\n    \"å‡¶ç…\": tap_lunar_time.getDayXiongSha().join('  '),\n    \"å½­ç¥–å¹²\": tap_lunar_time.getPengZuGan(),\n    \"å½­ç¥–æ”¯\": tap_lunar_time.getPengZuZhi(),\n    \"å­£èŠ‚\": tap_lunar_time.getSeason(),\n    \"æœˆç›¸\": tap_lunar_time.getYueXiang() + \"æœˆ\",\n    \"ç‰©å€™\": tap_lunar_time.getHou() + \" \" + tap_lunar_time.getWuHou(),\n    \"å–œç¥\": tap_lunar_time.getDayPositionXiDesc(),\n    \"ç¦ç¥\": tap_lunar_time.getDayPositionFuDesc(),\n    \"è´¢ç¥\": tap_lunar_time.getDayPositionCaiDesc(),\n    \"é˜³è´µ\": tap_lunar_time.getDayPositionYangGuiDesc(),\n    \"é˜´è´µ\": tap_lunar_time.getDayPositionYinGuiDesc(),\n    \"ä¹æ˜Ÿ\": tap_lunar_time.getDayNineStar().toString(),\n    \"æ˜Ÿå®¿\": tap_lunar_time.getGong() + \"æ–¹\" + tap_lunar_time.getXiu() + tap_lunar_time.getZheng() + tap_lunar_time.getAnimal() + \"(\" + tap_lunar_time.getXiuLuck() + \")\",\n    \"ç›¸å†²\": tap_lunar_time.getDayShengXiao() + 'æ—¥å†²' + tap_lunar_time.getDayChongDesc(),\n    \"å€¼æ˜Ÿ\": tap_lunar_time.getZhiXing(),\n    \"å¤©ç¥\": tap_lunar_time.getDayTianShen() + \"(\" + tap_lunar_time.getDayTianShenType() + tap_lunar_time.getDayTianShenLuck() + \"æ—¥)\",\n    \"æœ¬æœˆèƒç¥\": tap_lunar_time.getMonthPositionTai(),\n    \"ä»Šæ—¥èƒç¥\": tap_lunar_time.getDayPositionTai(),\n    \"å²ç…\": \"å²ç…\" + tap_lunar_time.getDaySha(),\n    \"å…­è€€\": tap_lunar_time.getLiuYao(),\n    \"ä¸ƒæ›œ\": tap_lunar_time.getZheng(),\n    \"æ—¥ç¦„\": tap_lunar_time.getDayLu(),\n    \"æ—¶è¾°å¹²æ”¯\": [ganzi1, ganzi2, ganzi3, ganzi4, ganzi5, ganzi6, ganzi7, ganzi8, ganzi9, ganzi10, ganzi11, ganzi12, ganzi13],\n    \"æ—¶è¾°å‰å‡¶\": [luck1, luck2, luck3, luck4, luck5, luck6, luck7, luck8, luck9, luck10, luck11, luck12, luck13],\n};\n\n//è¾“å‡ºåˆ°å®ä½“\nvar outputMsg = {\n    \"Now_solar\": Now_solar,       //ç°åœ¨-é˜³å†ä¿¡æ¯\n    \"Now_lunar\": Now_lunar,       //ç°åœ¨-å†œå†ä¿¡æ¯\n    \"Tap_solar\": Tap_solar,       //ç‚¹å‡»-é˜³å†ä¿¡æ¯\n    \"Tap_lunar\": Tap_lunar,       //ç‚¹å‡»-å†œå†ä¿¡æ¯\n    \"Jieqi\": Jieqi,               //èŠ‚æ°”æé†’ä¿¡æ¯\n    \"Shengriwarn\": Shengriwarn,   //ç”Ÿæ—¥æé†’ä¿¡æ¯\n    \"Shengri\": Shengrinew,        //ç”Ÿæ—¥ä¿¡æ¯\n    \"Huangli\": Huangli,           //é»„å†ä¿¡æ¯\n    \"Lunarday_num\": Lunarday_num,   //å†œå†id\n    \"Lunar_label\": Lunar_label,     //å†œå†æ–‡æœ¬æ•°ç»„\n    \"Jieqi_label\": Jieqi_label,     //èŠ‚æ°”æ–‡æœ¬æ•°ç»„\n    \"Jiaqi_label\": Jiaqi_label,     //å‡æœŸæ–‡æœ¬æ•°ç»„\n    \"Jieri_label_lunar\": Jieri_label_lunar,    //èŠ‚æ—¥-å†œå†-æ–‡æœ¬æ•°ç»„\n    \"Jieri_label_solar\": Jieri_label_solar,    //èŠ‚æ—¥-é˜³å†-æ–‡æœ¬æ•°ç»„\n};\nreturn outputMsg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "Lunar",
                "module": "lunar-javascript"
            }
        ],
        "x": 540,
        "y": 120,
        "wires": [
            [
                "955564606288bc47"
            ]
        ]
    },
    {
        "id": "955564606288bc47",
        "type": "ha-sensor",
        "z": "8debaea502f81074",
        "g": "2034c7b6dac3fdda",
        "name": "å†œå† sensor.lunar",
        "entityConfig": "1e814d1032ca3c69",
        "version": 0,
        "state": "Tap_solar['æ—¥æœŸB']",
        "stateType": "msg",
        "attributes": [
            {
                "property": "Now_solar",
                "value": "Now_solar",
                "valueType": "msg"
            },
            {
                "property": "Now_lunar",
                "value": "Now_lunar",
                "valueType": "msg"
            },
            {
                "property": "Tap_solar",
                "value": "Tap_solar",
                "valueType": "msg"
            },
            {
                "property": "Tap_lunar",
                "value": "Tap_lunar",
                "valueType": "msg"
            },
            {
                "property": "Jieqi",
                "value": "Jieqi",
                "valueType": "msg"
            },
            {
                "property": "Shengriwarn",
                "value": "Shengriwarn",
                "valueType": "msg"
            },
            {
                "property": "Shengri",
                "value": "Shengri",
                "valueType": "msg"
            },
            {
                "property": "Huangli",
                "value": "Huangli",
                "valueType": "msg"
            },
            {
                "property": "Lunar_label",
                "value": "Lunar_label",
                "valueType": "msg"
            },
            {
                "property": "Jieqi_label",
                "value": "Jieqi_label",
                "valueType": "msg"
            },
            {
                "property": "Jiaqi_label",
                "value": "Jiaqi_label",
                "valueType": "msg"
            },
            {
                "property": "Jieri_label_lunar",
                "value": "Jieri_label_lunar",
                "valueType": "msg"
            },
            {
                "property": "Jieri_label_solar",
                "value": "Jieri_label_solar",
                "valueType": "msg"
            },
            {
                "property": "Lunarday_num",
                "value": "Lunarday_num",
                "valueType": "msg"
            }
        ],
        "inputOverride": "allow",
        "outputProperties": [],
        "x": 710,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "332684eb89e75cd5",
        "type": "function",
        "z": "8debaea502f81074",
        "g": "2034c7b6dac3fdda",
        "name": "ç»´æŠ¤ç”Ÿæ—¥",
        "func": "/*åˆå§‹åŒ–ç”Ÿæ—¥+çºªå¿µæ—¥æ•°ç»„,ä¸€å…±10ç»„æ•°æ®*/\nvar Shengri = [\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n    { åç§°: \"\", é˜³å†: \"\", é˜³å†å¤©æ•°: \"\", é˜³å†å¤©æ•°è¯´æ˜: \"\", å†œå†: \"\", å†œå†å¤©æ•°: \"\", å†œå†å¤©æ•°è¯´æ˜: \"\" },\n]\n\nShengri[0].åç§° = \"å¼ å¼ºğŸ‚\";\nShengri[0].é˜³å† = \"\";\nShengri[0].å†œå† = \"0930\";\n\nShengri[1].åç§° = \"å‘¼ä¸¥çº¢ğŸ‚\";\nShengri[1].é˜³å† = \"\";\nShengri[1].å†œå† = \"0427\";\n\nShengri[2].åç§° = \"å¼ å­è½©ğŸ‚\";\nShengri[2].é˜³å† = \"0421\";\nShengri[2].å†œå† = \"\";\n\nShengri[3].åç§° = \"\";\nShengri[3].é˜³å† = \"\";\nShengri[3].å†œå† = \"\";\n\nShengri[4].åç§° = \"\";\nShengri[4].é˜³å† = \"\";\nShengri[4].å†œå† = \"\";\n\nShengri[5].åç§° = \"\";\nShengri[5].é˜³å† = \"\";\nShengri[5].å†œå† = \"\";\n\nShengri[6].åç§° = \"\";\nShengri[6].é˜³å† = \"\";\nShengri[6].å†œå† = \"\";\n\nShengri[7].åç§° = \"\";\nShengri[7].é˜³å† = \"\";\nShengri[7].å†œå† = \"\";\n\nShengri[8].åç§° = \"\";\nShengri[8].é˜³å† = \"\";\nShengri[8].å†œå† = \"\";\n\nShengri[9].åç§° = \"\";\nShengri[9].é˜³å† = \"\";\nShengri[9].å†œå† = \"\";\n\nvar outputMsg = {\n    \"date\": msg.date,          //è¿‡åº¦ä¸‹æ—¥æœŸ\n    \"Shengri\": Shengri,         //ç”Ÿæ—¥æ•°ç»„\n    \"payload\": msg.itmes\n};\nreturn outputMsg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "Lunar",
                "module": "lunar-javascript"
            }
        ],
        "x": 400,
        "y": 120,
        "wires": [
            [
                "04b64d4aaf049959"
            ]
        ]
    },
    {
        "id": "0d8931a769492254",
        "type": "comment",
        "z": "8debaea502f81074",
        "g": "2034c7b6dac3fdda",
        "name": "ä¸‡å¹´å†ï¼š2025-06-29 æ›´æ–°     ",
        "info": "",
        "x": 690,
        "y": 180,
        "wires": []
    },
    {
        "id": "a005d8fd2ae74b52",
        "type": "server-state-changed",
        "z": "8debaea502f81074",
        "g": "2034c7b6dac3fdda",
        "name": "æ—¥æœŸæ›´æ–°",
        "server": "d5d3e351.02443",
        "version": 6,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "text.lunar_date"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 120,
        "wires": [
            [
                "ba25fb7a0d76fdc6"
            ]
        ]
    },
    {
        "id": "0127accfa1f097fd",
        "type": "ha-entity-config",
        "server": "d5d3e351.02443",
        "deviceConfig": "5e18169cbf9aa2e0",
        "name": "lunar_date",
        "version": 6,
        "entityType": "text",
        "haConfig": [
            {
                "property": "name",
                "value": "lunar_date"
            },
            {
                "property": "icon",
                "value": ""
            },
            {
                "property": "entity_picture",
                "value": ""
            },
            {
                "property": "entity_category",
                "value": ""
            },
            {
                "property": "mode",
                "value": "text"
            },
            {
                "property": "min_length",
                "value": 10
            },
            {
                "property": "max_length",
                "value": 10
            },
            {
                "property": "pattern",
                "value": ""
            }
        ],
        "resend": false,
        "debugEnabled": false
    },
    {
        "id": "d5d3e351.02443",
        "type": "server",
        "name": "æ¶ˆé€Home Assistant",
        "addon": false,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "",
        "connectionDelay": false,
        "cacheJson": false,
        "heartbeat": false,
        "heartbeatInterval": "30",
        "areaSelector": "friendlyName",
        "deviceSelector": "friendlyName",
        "entitySelector": "friendlyName",
        "statusSeparator": ":",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "default",
        "statusTimeFormat": "h:m",
        "enableGlobalContextStore": false
    },
    {
        "id": "1e814d1032ca3c69",
        "type": "ha-entity-config",
        "server": "d5d3e351.02443",
        "deviceConfig": "5e18169cbf9aa2e0",
        "name": "lunar",
        "version": "6",
        "entityType": "sensor",
        "haConfig": [
            {
                "property": "name",
                "value": "lunar"
            },
            {
                "property": "icon",
                "value": ""
            },
            {
                "property": "entity_picture",
                "value": ""
            },
            {
                "property": "entity_category",
                "value": ""
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "unit_of_measurement",
                "value": ""
            },
            {
                "property": "state_class",
                "value": ""
            }
        ],
        "resend": true,
        "debugEnabled": false
    },
    {
        "id": "5e18169cbf9aa2e0",
        "type": "ha-device-config",
        "name": "ä¸‡å¹´å†",
        "hwVersion": "",
        "manufacturer": "Node-RED",
        "model": "",
        "swVersion": "æ¶ˆé€"
    }
]
